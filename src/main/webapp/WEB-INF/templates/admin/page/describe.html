<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" th:replace="layout::head('WallRide')" />
		<title>WallRide</title>
	</head>
	<body>
		<header th:replace="layout::header"></header>
		<div>
			<div th:replace="layout::sidebar"></div>
			<div id="main">
				<div class="row">
					<div class="col-sm-12">
						<div class="pull-left">
							<ol class="breadcrumb">
								<li><a th:href="@{__${ADMIN_PATH}__/}">Dashboard</a></li>
								<li><a th:href="@{__${ADMIN_PATH}__/pages/index}">Pages</a></li>
								<li class="active" th:text="${page.title}"></li>
							</ol>
						</div>
						<div class="pull-right">
							<ul class="pager">
								<li th:classappend="${prevId eq null}?'disabled'" class="previous">
									<a th:href="${prevId ne null} ? @{__${ADMIN_PATH}__/pages/describe(id=${prevId},token=${token})} : '#'"><span class="glyphicon glyphicon-chevron-left"></span></a>
								</li>
								<li th:classappend="${nextId eq null}?'disabled'" class="next">
									<a th:href="${nextId ne null} ? @{__${ADMIN_PATH}__/pages/describe(id=${nextId},token=${token})} : '#'"><span class="glyphicon glyphicon-chevron-right"></span></a>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-9 wr-describe-main">
						<div class="alert alert-success" th:if="${savedPage ne null}">
							<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
							<span th:text="#{SavedPage}">Page saved.</span>
						</div>
						<div class="page-header clearfix">
							<img th:if="${page.cover ne null}" th:src="@{${#medias.link(page.cover)}(w=1200,h=500,m=1)}" class="wr-post-cover" />
							<h1 th:text="${page.title}">Page Title</h1>
						</div>
						<div class="clearfix">
							<article class="wr-article-page" th:each="postBody, bodyStat : ${page.bodies}">
								<p th:utext="${#posts.body(postBody)}"></p>
								<hr th:if="${!bodyStat.last}" />
							</article>
						</div>
						<hr/>
						<span class="glyphicon glyphicon-user"></span> Created By <a th:href="@{__${ADMIN_PATH}__/users/describe(id=${page.author.id})}" th:text="${page.author}">Author</a>
					</div>
					<div class="col-sm-3 wr-tool-panel">
						<div class="tools clearfix">
							<div class="pull-left">
								<div class="status">
									<span th:if="${#strings.toString(page.status) eq 'UNPUBLISHED'}" class="glyphicon glyphicon-warning-sign"></span>
									<span th:if="${#strings.toString(page.status) eq 'SCHEDULED'}" class="glyphicon glyphicon-time"></span>
									<span th:if="${#strings.toString(page.status) ne 'PUBLISHED'}" th:text="${#messages.msg('Post.Status.' + page.status)}">Published</span>
									<a th:href="@{__${WEBSITE_PATH}__/__${page.code}__}" th:if="${#strings.toString(page.status) eq 'PUBLISHED'}" target="_blank">
										<span class="glyphicon glyphicon-globe"></span>
										<span th:text="${#messages.msg('Post.Status.' + page.status)}">Published</span>
									</a>
								</div>
							</div>
							<div class="btn-toolbar pull-right" role="toolbar">
								<div class="btn-group">
									<a th:href="@{__${ADMIN_PATH}__/pages/edit(id=${page.id})}" title="編集" type="button" class="btn btn-info" th:text="#{Edit}">編集</a>
<!--
									<a class="btn btn-info dropdown-toggle" data-toggle="dropdown"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></a>
									<ul class="dropdown-menu pull-right" role="menu">
										<li class="disabled"><a href="#">記事をコピー</a></li>
										<li><a href="">英語版</a></li>
										<li><a href="">ドイツ語版</a></li>
										<li><a href="">フランス語版</a></li>
									</ul>
-->
								</div>
							</div>
						</div>
						<dl>
							<dt th:text="#{Date}">公開日</dt>
							<dd th:if="${page.date ne null}" th:text="${page.date.toString('yyyy/MM/dd')}"></dd>
						</dl>
						<dl>
							<dt th:text="#{ParentPage}">親ページ</dt>
							<dd>
							<ul class="list-unstyled">
								<li th:if="${page.parent ne null}" th:text="${page.parent.title}">Category Name</li>
							</ul>
							</dd>
						</dl>
						<dl>
							<dt>META情報</dt>
							<dd>
								<dl>
									<dt>Keywords</dt>
									<dd th:text="${page.seo != null} ? ${page.seo.keywords}"></dd>
									<dt>Description</dt>
									<dd th:text="${page.seo != null} ? ${page.seo.description}"></dd>
								</dl>
							</dd>
						</dl>
						<a th:href="@{__${ADMIN_PATH}__/pages/describe(part=delete-dialog,id=${page.id})}" data-toggle="modal" data-target="#delete-modal"><span class="glyphicon glyphicon-trash"></span> <span th:text="#{DeletePage}">ページを削除</span></a>
						<!-- #delete-modal -->
						<div id="delete-modal" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
							<div id="delete-dialog" class="modal-dialog">
								<form th:action="@{__${ADMIN_PATH}__/pages/delete(id=${page.id})}" method="post">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
											<h4 class="modal-title" th:text="#{DeletePage}">ページを削除</h4>
										</div>
										<div class="modal-body">
											<p th:text="#{MakeSureDelete}">本当に削除しますか？</p>
										</div>
										<div class="modal-footer">
											<button class="btn btn-default" data-dismiss="modal" th:text="#{Cancel}">キャンセル</button>
											<button class="btn btn-primary" th:text="#{Delete}">削除</button>
										</div>
									</div>
								</form>
							</div>
						</div>
						<!--/#delete-modal -->
						<script th:inline="javascript">
							// <![CDATA[
							$(function() {
								$('#delete-modal').on('hidden.bs.modal', function() {
									$(this).removeData('bs.modal');
								});
							});
							// ]]>
						</script>
					</div>
				</div>
				<div class="alert alert-warning" th:unless="${page ne null}">
					<strong>Not Found.</strong> May be deleted.
				</div>
			</div>
		</div>
		<footer>
		</footer>
	</body>
</html>